{% extends 'base.html' %}
{% load static %}

{% block head %}
<title>Menu: Venta telefónica</title>

{% endblock head %}

{% block content %}


    {% if platillos %}
    <form id="formMenu" method="POST">
        <!-- definimos las pestañas (vía una lista no ordenada) -->
        <ul class="nav nav-tabs nav-fill p-3" id="paneles" role="tablist">
            <li class="nav-item" role="presentation">
                <a class="nav-link active" id="menu-tab" data-mdb-toggle="tab" href="#panel-menu" role="tab" aria-controls="panel-menu" aria-selected="true">Menús completos</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="ordenes-tab" data-mdb-toggle="tab" href="#panel-ordenes" role="tab" aria-controls="panel-ordenes" aria-selected="false">Órdenes</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="bebidas-tab" data-mdb-toggle="tab" href="#panel-bebidas" role="tab" aria-controls="panel-bebidas" aria-selected="false">Bebidas</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="extras-tab" data-mdb-toggle="tab" href="#panel-extras" role="tab" aria-controls="panel-extras" aria-selected="false">Extras</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="sushis-tab" data-mdb-toggle="tab" href="#panel-sushis" role="tab" aria-controls="panel-sushis" aria-selected="false">Sushis</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="desayunos-tab" data-mdb-toggle="tab" href="#panel-desayunos" role="tab" aria-controls="panel-desayunos" aria-selected="false">Desayunos</a>
            </li>
        </ul>

        <!-- Definimos los elementos de la tabla como divisiónes de la clase "tab-pane" -->
        <div class="tab-content p-3" id="contenido-paneles">

            <!-- panel 1: menús -->
            <div class="tab-pane fade show active" id="panel-menu" role="tabpanel" aria-labelledby="menu-tab">
                <div class="d-flex flex-column px-3" id="contenedor-lista">
                    <ul class="list-group flex-fill" id="lista-menus">
                        <!--este elemento estará oculto, pero se usará de referencia para generar las entradas de la lista de menús completos-->
                        <li class="list-group-item" id="plantilla-menu" hidden>
                            <div class="container">
                                <div class="row justify-content-between">
                                    <div class="col">
                                        <div class="row mb-1">
                                            <div class="input-group mb-3">
                                              <span class="input-group-text" style="width: 100px">Entrada</span>
                                              <select class="form-select" name="select-entrada" aria-describedby="inputGroup-sizing-default">
                                                <option selected disabled></option>
                                                {% for platillo in platillos %}
                                                    {% if platillo.tipo == 'EN' or platillo.tipo == 'ST'%}
                                                        <option value="{{platillo.nombre}}">{{platillo.nombre}}</option>
                                                    {% endif %}
                                                {% endfor %}        
                                              </select>
                                            </div>                                           
                                        </div>
                                        <div class="row mb-1">
                                            <div class="input-group mb-3">
                                              <span class="input-group-text" style="width: 100px">2tiempo</span>
                                              <select class="form-select" name="select-segundo-tiempo">
                                                  <option selected disabled></option>
                                                  {% for platillo in platillos %}
                                                      {% if platillo.tipo == 'ST' or platillo.tipo == 'EN'%}
                                                          <option value="{{platillo.nombre}}">{{platillo.nombre}}</option>
                                                      {% endif %}
                                                  {% endfor %}   
                                              </select>
                                            </div>                                           
                                        </div>
                                        <div class="row">
                                            <div class="input-group mb-3">
                                              <span class="input-group-text" style="width: 100px">Guisado</span>
                                              <select class="form-select" name="select-guisado">
                                                  <option selected disabled></option>
                                                  {% for platillo in platillos %}
                                                      {% if platillo.tipo == 'GU' %}
                                                          <option value="{{platillo.nombre}}">{{platillo.nombre}}</option>
                                                      {% endif %}
                                                  {% endfor %}
                                              </select>
                                            </div>                                           
                                        </div>
                                        <!-- El input para las observaciones individuales de cada orden completa -->
                                        <div class="row">
                                            <div class="form-outline">
                                                <input type="text" class="form-control" />
                                            </div>
                                            <p> </p>
                                        </div>
                                        <div class="row mt-1">
                                            <button type="button" class="btn btn-primary btn-danger" onclick="removerMenu(this)">
                                                <i class="far fa-trash-alt fa-lg">&Tab;Eliminar</i>
                                            </button>
                                        </div>
                                    </div>


                                </div>
                            </div>
                        </li>
                    </ul>
                    <!-- Botón para agregar un nuevo menú completo -->
                    <div class="d-flex justify-content-end py-3">
                        <button type="button" class="btn btn-primary btn-md btn-warning" onclick="agregarMenu()">
                            <i class="fas fa-plus fa-lg">&Tab;agregar otro menú</i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- panel 2: órdenes  -->
            <div class="tab-pane fade" id="panel-ordenes" role="tabpanel" aria-labelledby="ordenes-tab">
                <!-- Input de busqueda  -->
                <div class="form-outline">
                    <input type="text" id="input-busqueda-ordenes" class="form-control" onkeyup="actualizaTablaOrdenes()" />
                    <label class="form-label" for="form1">
                        <i class="fas fa-search"></i>
                        Buscar platillo
                    </label>
                    
                </div><br>
    
                <div class="table-responsive" id="tabla-ordenes-padre">
                    {% csrf_token %}
                    <!-- El contenido de esta tabla se crea con javascript (function generaTablaOrdenes())  -->
                </div>
            </div>

            <!-- panel 3: bebidas -->
            <div class="tab-pane fade" id="panel-bebidas" role="tabpanel" aria-labelledby="bebidas-tab">
                <!-- Input de busqueda  -->
                <div class="form-outline">
                    <input type="text" id="input-busqueda-bebidas" class="form-control" onkeyup="actualizaTablaBebidas()" />
                    <label class="form-label" for="form1">
                        <i class="fas fa-search"></i>
                        Buscar bebida
                    </label>
                    
                </div><br>
    
                <div class="table-responsive" id="tabla-bebidas-padre">
                    {% csrf_token %}
                    <!-- El contenido de esta tabla se crea con javascript (function generaTablaBebidas())  -->
                </div>
            </div>

            <!-- panel 4: extras -->
            <div class="tab-pane fade" id="panel-extras" role="tabpanel" aria-labelledby="extras-tab">
                <!-- Input de busqueda  -->
                <div class="form-outline">
                    <input type="text" id="input-busqueda-extras" class="form-control" onkeyup="actualizaTablaExtras()" />
                    <label class="form-label" for="form1">
                        <i class="fas fa-search"></i>
                        Buscar extra
                    </label>
                </div><br>
    
                <div class="table-responsive" id="tabla-extras-padre">
                    {% csrf_token %}
                    <!-- El contenido de esta tabla se crea con javascript (function generaTablaExtras())  -->
                </div>
            </div>

            <!-- panel 5: sushis -->
            <div class="tab-pane fade" id="panel-sushis" role="tabpanel" aria-labelledby="sushis-tab">
                <!-- Input de busqueda  -->
                <div class="form-outline">
                    <input type="text" id="input-busqueda-sushis" class="form-control" onkeyup="actualizaTablaSushis()" />
                    <label class="form-label" for="form1">
                        <i class="fas fa-search"></i>
                        Buscar sushi
                    </label>
                </div><br>

                <div class="table-responsive" id="tabla-sushis-padre">
                    {% csrf_token %}
                    <!-- El contenido de esta tabla se crea con javascript (function generaTablaSushis())  -->
                </div> 
            </div>

            <!-- panel 6: Desayunos-->
            <div class="tab-pane fade" id="panel-desayunos" role="tabpanel" aria-labelledby="desayunos-tab">
                <div class="container-lg">
                    <!-- Comienza la tabla que contendrá los paquetes-->
                    <div class="table-responsive">
                        <table class="table">
                            <tbody>
                                <tr>
                                    <td>
                                        <div class="card border border-primary mb-3" style="max-width: 18rem">
                                            <div class="card-header">Paquete 1</div>
                                            <div class="card-body text-dark">
                                                <h6>Jugo y fruta</h6>
                                                <select hidden name="select-"  id="select1"class="form-select">
                                                <option selected disabled>------</option>
                                                {% for paq1 in paquete1 %}
                                                    {% if paq1.tipo_desayuno == "D1" and paq1.esta_eliminado == False %}
                                                    <option selected disabled value="{{paq1.nombre}}">{{paq1.nombre}}</option>

                                                    {% endif %}
                                                {% endfor %}
                                                </select>
                                                <h6>Hot cakes/molletes/sopes con pollo:</h6>
                                                <select name="select"  id="select2" class="form-select">
                                                    <option selected disabled>------</option>
                                                    {% for paq1 in paquete1 %}
                                                    {% if paq1.tipo_desayuno == "D2" and paq1.esta_eliminado == False %}
                                                    <option value="{{paq1.nombre}}">{{paq1.nombre}}</option>

                                                    {% endif %}
                                                {% endfor %}

                                                </select>

                                                {% for  precios in desayunos%}
                                                {%if precios.nombre == "Paquete 1"%}
                                                    <h6>Café de olla/americano/Té</h6>
                                                    <h6 id="costo1">Precio --------{{precios.precio}} </h6>
                                                    <h6>Café con leche/ leche caliente/Chocolate/Capuchino</h6>
                                                    <h6 id="extra1"></h6>
                                                {%endif%}
                                                {%endfor%}
                                                <select name="select" id="select3" class="form-select">
                                                    <option selected disabled>------</option>
                                                    {% for paq1 in paquete1 %}
                                                    {% if paq1.tipo_desayuno == "D3" and paq1.esta_eliminado == False %}
                                                    <option value="{{paq1.nombre}}">{{paq1.nombre}}</option>

                                                    {% endif %}
                                                {% endfor %}
                                                </select>
                                                <br></br>
                                                <div class="text-center">
                                                    <button type="button" class="btn btn-warning btn-rounded" name="Paquete 1" onload="sumarextra(costo,extra)" onclick="agregarDesayuno(this,2,3)"value="Paquete 1">Añadir</button>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="card border border-dark mb-3" style="max-width: 18rem">
                                            <div class="card-header">Paquete 2</div>
                                            <div class="card-body text-dark">
                                            <h6>Jugo y fruta</h6>
                                            <select hidden name="select" form="paquetes" id="select4"class="form-select">
                                                <option selected disabled>------</option>
                                                {% for paq2 in paquete2 %}
                                                    {% if paq2.tipo_desayuno == "D1" and paq2.esta_eliminado == False %}
                                                    <option selected disabled value="{{paq2.nombre}}">{{paq2.nombre}}</option>

                                                    {% endif %}
                                                {% endfor %}
                                            </select>
                                            <h6>Omelet del día o Huevos Rancheros o con jamón o al albañil o con longaniza/ Chilaquiles:</h6>
                                            <select name="select" form="paquetes" id="select5" class="form-select">
                                               <option selected disabled>------</option>
                                                    {% for paq2 in paquete2 %}
                                                    {% if paq2.tipo == "GU" and paq2.esta_eliminado == False and paq2.tipo_desayuno == "D2" %}
                                                    <option value="{{paq2.nombre}}">{{paq2.nombre}}</option>

                                                    {% endif %}
                                                {% endfor %}

                                            </select>
                                            {% for  precios in desayunos%}
                                                {%if precios.nombre == "Paquete 2"%}
                                                    <h6>Café de olla/americano/Té</h6>
                                                    <h6 id="costo2">Precio --------{{precios.precio}} </h6>
                                                    <h6>Café con leche/ leche caliente/Chocolate/Capuchino</h6>
                                                    <h6 id="extra2"></h6>
                                                {%endif%}
                                            {%endfor%}
                                            <select name="select" form="paquetes" id="select6" class="form-select">
                                                <option selected disabled>------</option>
                                                    {% for paq2 in paquete2 %}
                                                    {% if paq2.tipo_desayuno == "D3" and paq2.esta_eliminado == False %}
                                                    <option value="{{paq2.nombre}}">{{paq2.nombre}}</option>

                                                    {% endif %}
                                                {% endfor %}
                                            </select>
                                            <br></br>
                                            <div class="text-center">
                                                <button type="button" class="btn btn-warning btn-rounded" value="Paquete 2" onclick="agregarDesayuno(this,5,6)">Añadir</button>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="card border border-primary mb-3" style="max-width: 18rem">
                                            <div class="card-header">Paquete 3</div>
                                            <div class="card-body text-dark">
                                            <h6>Jugo y fruta</h6>
                                            <select hidden name="select" form="paquetes" id="select7"class="form-select">
                                                <option selected disabled>------</option>
                                                {% for paq3 in paquete3 %}
                                                    {% if paq3.tipo_desayuno == "D1" and paq3.esta_eliminado == False %}
                                                    <option selected disabled value="{{paq3.nombre}}">{{paq3.nombre}}</option>

                                                    {% endif %}
                                                {% endfor %}
                                            </select>
                                            <h6>Guisado o sugerencia del día:</h6>
                                            <select name="select" form="paquetes" id="select8" class="form-select">
                                               <option selected disabled>------</option>
                                                {% for paq3 in platillos %}
                                                    {% if paq3.tipo == "GU" and paq3.esta_eliminado == False %}
                                                    <option value="{{paq3.nombre}}">{{paq3.nombre}}</option>

                                                    {% endif %}
                                                {% endfor %}

                                            </select>
                                            {% for  precios in desayunos%}
                                                {%if precios.nombre == "Paquete 3"%}
                                                    <h6>Café de olla/americano/Té</h6>
                                                    <h6 id="costo3">Precio --------{{precios.precio}} </h6>
                                                    <h6>Café con leche/ leche caliente/Chocolate/Capuchino</h6>
                                                    <h6 id="extra3"></h6>
                                                {%endif%}
                                            {%endfor%}
                                            <select name="select" form="paquetes" id="select9" class="form-select">
                                                <option selected disabled>------</option>
                                                {% for paq3 in paquete3 %}
                                                    {% if paq3.tipo_desayuno == "D3" and paq3.esta_eliminado == False %}
                                                    <option value="{{paq3.nombre}}">{{paq3.nombre}}</option>

                                                    {% endif %}
                                                {% endfor %}
                                            </select>
                                            <br></br>
                                            <div class="text-center">
                                                <button type="button" class="btn btn-warning btn-rounded" value="Paquete 3" onclick="agregarDesayuno(this,8,9)">Añadir</button>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="card border border-dark mb-3" style="max-width: 18rem">
                                            <div class="card-header">Paquete 4</div>
                                            <div class="card-body text-dark">
                                            <h6>Jugo y fruta</h6>
                                            <select hidden name="select" form="paquetes" id="select10"class="form-select">
                                                <option selected disabled>------</option>
                                                {% for paq4 in paquete4 %}
                                                    {% if paq4.tipo_desayuno == "D1" and paq4.esta_eliminado == False %}
                                                    <option selected disabled value="{{paq4.nombre}}">{{paq4.nombre}}</option>

                                                    {% endif %}
                                                {% endfor %}
                                            </select>
                                            <h6>Costilla con Chilaquiles o con sopes(2)</h6>
                                            <select name="select" form="paquetes" id="select11" class="form-select">
                                               <option selected disabled>------</option>
                                                {% for paq4 in paquete4 %}
                                                    {% if paq4.tipo_desayuno != "D1" and paq4.tipo_desayuno != "D3" and paq4.esta_eliminado == False %}
                                                    <option value="{{paq4.nombre}}">{{paq4.nombre}}</option>

                                                    {% endif %}
                                                {% endfor %} pollo</option>

                                            </select>
                                            {% for  precios in desayunos%}
                                                {%if precios.nombre == "Paquete 4"%}
                                                    <h6>Café de olla/americano/Té</h6>
                                                    <h6 id="costo4">Precio --------{{precios.precio}} </h6>
                                                    <h6>Café con leche/ leche caliente/Chocolate/Capuchino</h6>
                                                    <h6 id="extra4"></h6>
                                                {%endif%}
                                            {%endfor%}
                                            <select name="select" form="paquetes" id="select12" class="form-select">
                                               <option selected disabled>------</option>
                                                {% for paq4 in paquete4 %}
                                                    {% if paq4.tipo_desayuno == "D3" and paq4.esta_eliminado == False %}
                                                    <option value="{{paq4.nombre}}">{{paq4.nombre}}</option>

                                                    {% endif %}
                                                {% endfor %} pollo</option>
                                            </select>
                                            <br></br>
                                            <div class="text-center">
                                                <button type="button" class="btn btn-warning btn-rounded" value="Paquete 4" onclick="agregarDesayuno(this,11,12)">Añadir</button>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="card border border-primary mb-3" style="max-width: 18rem">
                                            <div class="card-header">Paquete 5</div>
                                            <div class="card-body text-dark">
                                            <h6>Jugo y fruta</h6>
                                            <select hidden name="select" form="paquetes" id="select13"class="form-select">
                                                <option selected disabled>------</option>
                                                {% for paq5 in paquete5 %}
                                                    {% if paq5.tipo_desayuno == "D1" and paq5.esta_eliminado == False %}
                                                    <option selected disabled value="{{paq5.nombre}}">{{paq5.nombre}}</option>

                                                    {% endif %}
                                                {% endfor %}
                                            </select>
                                            <h6>Milanesa o Pechuga asada, empanizada o Cecina:</h6>
                                            <select name="select" form="paquetes" id="select14" class="form-select">
                                                 <option selected disabled>------</option>
                                                {% for paq5 in paquete5 %}
                                                    {% if paq5.tipo_desayuno != "D1" and paq5.tipo_desayuno != "D3" and paq5.esta_eliminado == False %}
                                                    <option value="{{paq5.nombre}}">{{paq5.nombre}}</option>

                                                    {% endif %}
                                                {% endfor %}

                                            </select>
                                            {% for  precios in desayunos%}
                                                {%if precios.nombre == "Paquete 5"%}
                                                    <h6>Café de olla/americano/Té</h6>
                                                    <h6 id="costo5">Precio --------{{precios.precio}} </h6>
                                                    <h6>Café con leche/ leche caliente/Chocolate/Capuchino</h6>
                                                    <h6 id="extra5"></h6>
                                                {%endif%}
                                            {%endfor%}
                                            <select name="select" form="paquetes" id="select15" class="form-select">
                                                 <option selected disabled>------</option>
                                                {% for paq5 in paquete5 %}
                                                    {% if paq5.tipo_desayuno == "D3" and paq5.esta_eliminado == False %}
                                                    <option value="{{paq5.nombre}}">{{paq5.nombre}}</option>

                                                    {% endif %}
                                                {% endfor %}
                                            </select>
                                            <br></br>
                                            <div class="text-center">
                                                <button type="button" class="btn btn-warning btn-rounded" value="Paquete 5" onclick="agregarDesayuno(this,14,15)">Añadir</button>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="card border border-dark mb-3" style="max-width: 18rem">
                                            <div class="card-header">Paquete 6</div>
                                            <div class="card-body text-dark">
                                            <h6>Jugo y fruta</h6>
                                            <select hidden name="select" form="paquetes" id="select16"class="form-select">
                                               <option selected disabled>------</option>
                                                {% for paq6 in paquete6 %}
                                                    {% if paq6.tipo_desayuno == "D1" and paq6.esta_eliminado == False %}
                                                    <option selected disabled value="{{paq6.nombre}}">{{paq6.nombre}}</option>

                                                    {% endif %}
                                                {% endfor %}
                                            </select>
                                            <h6>Pancita:</h6>
                                            <select name="select" form="paquetes" id="select17" class="form-select">
                                                <option selected disabled>------</option>
                                                {% for paq6 in paquete6 %}
                                                    {% if paq6.tipo_desayuno != "D1" and paq6.tipo_desayuno != "D3" and paq6.esta_eliminado == False %}
                                                    <option value="{{paq6.nombre}}">{{paq6.nombre}}</option>

                                                    {% endif %}
                                                {% endfor %}

                                            </select>
                                            {% for  precios in desayunos%}
                                                {%if precios.nombre == "Paquete 6"%}
                                                    <h6>Café de olla/americano/Té</h6>
                                                    <h6 id="costo6">Precio --------{{precios.precio}} </h6>
                                                    <h6>Café con leche/ leche caliente/Chocolate/Capuchino</h6>
                                                    <h6 id="extra6"></h6>
                                                {%endif%}
                                            {%endfor%}
                                            <select name="select" form="paquetes" id="select18" class="form-select">
                                                <option selected disabled>------</option>
                                                {% for paq6 in paquete6 %}
                                                    {% if paq6.tipo_desayuno == "D3" and paq6.esta_eliminado == False %}
                                                    <option value="{{paq6.nombre}}">{{paq6.nombre}}</option>

                                                    {% endif %}
                                                {% endfor %}
                                            </select>
                                            <br></br>
                                            <div class="text-center">
                                               <button type="button" class="btn btn-warning btn-rounded" value="Paquete 6" onclick="agregarDesayuno(this,17,18)">Añadir</button>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="card text-white bg-success mb-3" style="max-width: 18rem">
                                            <div class="card-header" style="color:white; background:#FFEA00;">Paquete infantil</div>
                                            <div class="card-body text-white">
                                            <h6>Jugo y fruta</h6>
                                            <select hidden name="select" form="paquetes" id="select19" class="form-select bg-success text-white">
                                                <option selected disabled>------</option>
                                                {% for paq7 in paquete7 %}
                                                    {% if paq7.tipo_desayuno == "D1" and paq7.esta_eliminado == False %}
                                                    <option selected disabled value="{{paq7.nombre}}">{{paq7.nombre}}</option>

                                                    {% endif %}
                                                {% endfor %}
                                            </select>
                                            <h6>Cereal con leche/Hot Cakes/Huevos con jamón o con salchica</h6>
                                            <h6>Salchipullpos/ Croquetas de pollo</h6>
                                            {% for  precios in desayunos%}
                                                {%if precios.nombre == "Paquete infantil"%}

                                                    <h6 id="costo6">Precio --------{{precios.precio}} </h6>

                                                {%endif%}
                                            {%endfor%}
                                            <select name="select" form="paquetes" id="select20" class="form-select bg-success text-white">
                                               <option selected disabled>------</option>
                                                {% for paq7 in paquete7 %}
                                                    {% if paq7.tipo_desayuno == "D2" and paq7.esta_eliminado == False %}
                                                    <option value="{{paq7.nombre}}">{{paq7.nombre}}</option>

                                                    {% endif %}
                                                {% endfor %}

                                            </select>

                                            <br></br>
                                            <div class="text-center">
                                                <button type="button" class="btn btn-primary btn-rounded" value="Paquete infantil" onclick="agregarDesayuno(this,20,null)">Añadir</button>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!--Tabla de ordenes-->
                    <div class="table-responsive">
                        <table class="table" >
                            <thead class="table-dark">
                                <tr >
                                    <th scope="col">Paquete</th>
                                    <th scope="col">Jugo o fruta</th>
                                    <th scope="col">Desayuno</th>
                                    <th scope="col">Bebidas</th>
                                    <th scope="col">Eliminar</th>
                                </tr>
                            </thead>
                            <tbody id="ordenes-desayunos">

                            </tbody>
                        </table>
                    </div>








                </div>
            </div>

        </div>

        <div class="card">
            <div class="card-body">
                <div class="form-outline">
                    <textarea class="form-control" id="textAreaExample" rows="4" name="observaciones"></textarea>
                    <label class="form-label" for="textAreaExample">Observaciones del pedido</label>
                </div>
                <div class="row g-0 gy-0 mt-2">
                    <div class="col">
                        <div class="d-grid gap-2 p-1">
                            <a href="{{ referer }}" class="btn btn-warning">
                                <i class="fas fa-arrow-left"></i>
                                Regresar
                            </a>
                        </div>
                    </div>
                    <div class="col">
                        <div class="d-grid gap-2 p-1">
                            <button type="button" onclick="validaForm()" class="btn btn-warning">
                                <i class="fas fa-cart-plus"></i>
                                Añadir al carrito
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </form>

    <!-- El siguiente div es la plantilla de los spinner que ocupan las tabs ordenes, bebidas, extras y sushis-->
    <div class="d-flex justify-content-start" id="spinner" style="visibility: hidden;">
        <div class="form-outline">
            <input readonly value="0" type="text" class="form-control"/>
            <label class="form-label" for="form1">Cantidad</label>
        </div>
        <div class="btn-group-vertical d-inline btn-group-sm" role="group" aria-label="Vertical button group">
            <button type="button" class="btn btn-outline-warning" data-mdb-ripple-color="dark">
            <i class="fas fa-angle-up"></i>
            </button>
            <button type="button" class="btn btn-outline-warning" data-mdb-ripple-color="dark">
            <i class="fas fa-angle-down"></i>
            </button>
        </div>
    </div>
    {% else %}
        <div class="container">
            <div class="row">
            <div class="col-md">
                <div class="card">
                    <div class="card-body">
                    <p class="card-text">
                        ¡No hay platillos registrados para el dia de hoy!
                    </p>
                    <div class="row">
                        <div class="col-md">
                            <div class="card shadow-0 mb-3">
                                <div class="card-body">
                                    <div class="d-grid gap-2">
                                        <a href="{{ referer }}" class="btn btn-warning">
                                            <i class="fas fa-arrow-left"></i>
                                            Regresar
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>
            </div>
            </div>
        </div>
    {% endif %}
{% endblock content %}

{% block script %}
    <script>
        //Variables globales para las tabs ordenes, bebidas y extras
        var body = document.getElementsByTagName("body")[0];
        var tablaOrdenesPadre = document.getElementById("tabla-ordenes-padre");
        var tablaBebidasPadre = document.getElementById("tabla-bebidas-padre");
        var tablaExtrasPadre = document.getElementById("tabla-extras-padre");
        var tablaSushisPadre = document.getElementById("tabla-sushis-padre");
        
        window.onload = function() {
            //agregamos la primera órden
            agregarMenu();
            sumarextra();

            //Se generan la tablas de las tabs ordenes, bebidas y extras
            generaTablaOrdenes();
            generaTablaBebidas();
            generaTablaExtras();
            generaTablaSushis();

        }

        //Se activa onkeyup() con el buscador con id="input-busqueda-ordenes"
        function actualizaTablaOrdenes(){
            {% for platillo in historiales_precio %}
                {% if not platillo.platillo.tipo == "EX" %}
                    {% if not platillo.platillo.tipo == "BE" %}
                        {% if not platillo.platillo.tipo == "SU" %}
                            fila = document.getElementById("fila-{{ platillo.platillo.nombre }}");
                            nombreLower = String('{{ platillo.platillo.nombre }}').toLowerCase();
                            nombreLower.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
                            nombreBuscado = document.getElementById("input-busqueda-ordenes").value.toLowerCase();
                            nombreBuscado.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
                            if( !sinDiacriticos(nombreLower).includes(sinDiacriticos(nombreBuscado)) ){
                                fila.style.display = "none";
                            }else{
                                fila.style.display = "table-row";
                            }
                        {% endif %}
                    {% endif %}
                {% endif %}
            {% endfor %}
        }

        //Se activa onkeyup() con el buscador con id="input-busqueda-bebidas"
        function actualizaTablaBebidas(){
            {% for platillo in historiales_precio %}
                {% if platillo.platillo.tipo == "BE" %}
                    fila = document.getElementById("fila-{{ platillo.platillo.nombre }}");
                    nombreLower = String('{{ platillo.platillo.nombre }}').toLowerCase();
                    nombreLower.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
                    nombreBuscado = document.getElementById("input-busqueda-bebidas").value.toLowerCase();
                    nombreBuscado.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
                    if( !sinDiacriticos(nombreLower).includes(sinDiacriticos(nombreBuscado)) ){
                        fila.style.display = "none";
                    }else{
                        fila.style.display = "table-row";
                    }
                {% endif %}
            {% endfor %}
        }

        //Se activa onkeyup() con el buscador con id="input-busqueda-extras"
        function actualizaTablaExtras(){
            {% for platillo in historiales_precio %}
                {% if platillo.platillo.tipo == "EX" %}
                    fila = document.getElementById("fila-{{ platillo.platillo.nombre }}");
                    nombreLower = String('{{ platillo.platillo.nombre }}').toLowerCase();
                    nombreLower.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
                    nombreBuscado = document.getElementById("input-busqueda-extras").value.toLowerCase();
                    nombreBuscado.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
                    if( !sinDiacriticos(nombreLower).includes(sinDiacriticos(nombreBuscado)) ){
                        fila.style.display = "none";
                    }else{
                        fila.style.display = "table-row";
                    }
                {% endif %}
            {% endfor %}
        }

        //Se activa onkeyup() con el buscador con id="input-busqueda-sushis"
        function actualizaTablaSushis(){
            {% for platillo in historiales_precio %}
                {% if platillo.platillo.tipo == "SU" %}
                    fila = document.getElementById("fila-{{ platillo.platillo.nombre }}");
                    nombreLower = String('{{ platillo.platillo.nombre }}').toLowerCase();
                    nombreLower.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
                    nombreBuscado = document.getElementById("input-busqueda-sushis").value.toLowerCase();
                    nombreBuscado.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
                    if( !sinDiacriticos(nombreLower).includes(sinDiacriticos(nombreBuscado)) ){
                        fila.style.display = "none";
                    }else{
                        fila.style.display = "table-row";
                    }
                {% endif %}
            {% endfor %}
        }

        let sinDiacriticos = (function(){
            let de = 'ÁÃÀÄÂÉËÈÊÍÏÌÎÓÖÒÔÚÜÙÛÑÇáãàäâéëèêíïìîóöòôúüùûñç',
            a = 'AAAAAEEEEIIIIOOOOUUUUNCaaaaaeeeeiiiioooouuuunc',
            re = new RegExp('['+de+']' , 'ug');

            return texto =>
                texto.replace(
                    re, 
                    match => a.charAt(de.indexOf(match))
                );
        })();

        //Genera la tabla que contiene las ordenes sueltas
        function generaTablaOrdenes(){
            // Crea un elemento table y un elemento tbody
            var tablaOrdenes = document.createElement("table");
            tablaOrdenes.id = "tabla-ordenes"
            tablaOrdenes.className = "buscador-ordenes";
            var tbodyOrdenes = document.createElement("tbody");

            // Crea el encabezado de la tabla
            var encabezado = document.createElement("thead");
            encabezado.className = "thbuscador-ordenes";
            var filaEncabezado = document.createElement("tr");
            var e1 = document.createElement("th");
            e1.scope = "col";
            var e2 = document.createElement("th");
            e2.scope = "col";
            var e3 = document.createElement("th");
            e3.scope = "col";
            e1.className = "buscador-ordenes";
            e2.className = "buscador-ordenes";
            e3.className = "buscador-ordenes";
            var textoE1 = document.createTextNode("Platillo");
            var textoE2 = document.createTextNode("Costo");
            var textoE3 = document.createTextNode("Selector");
            
            e1.appendChild(textoE1);
            e2.appendChild(textoE2);
            e3.appendChild(textoE3);
            filaEncabezado.appendChild(e1);
            filaEncabezado.appendChild(e2);
            filaEncabezado.appendChild(e3);
            encabezado.appendChild(filaEncabezado);

            var i=0;
            //Crea cada fila para los platillos
            {% for platillo in historiales_precio %}
                {% if not platillo.platillo.tipo == "EX" %}
                    {% if not platillo.platillo.tipo == "BE" %}
                        {% if not platillo.platillo.tipo == "SU" %}
                            var fila = document.createElement("tr");
                            var celda1 = document.createElement("td");
                            var celda2 = document.createElement("td");
                            var celdaSpinner = document.createElement("td"); 
                            celda1.id = "celda1-{{ platillo.platillo.nombre }}";
                            celda2.id = "celda2-{{ platillo.platillo.nombre }}";
                            celdaSpinner.id = "celda-spinner-{{ platillo.platillo.nombre }}";
                            celda1.className = "buscador-ordenes";
                            celda2.className = "buscador-ordenes";
                            celdaSpinner.className = "buscador-ordenes";
                            var textoCelda1 = document.createTextNode("{{ platillo.platillo.nombre }}");
                            var textoCelda2 = document.createTextNode("$ {{ platillo.precio }}");
                            celda1.appendChild(textoCelda1);
                            celda2.appendChild(textoCelda2);

                            //Esto es para crear el spinner dentro de la celda
                            var original = document.getElementById("spinner");
                            var nuevo = original.cloneNode(true);
                            nuevo.style.visibility = "visible";
                            nuevo.id = "spinner-{{ platillo.platillo.nombre }}";
                            i += 1;
                            hijos = nuevo.childNodes;
                            forma = hijos[1].childNodes;
                            botones = hijos[3].childNodes;
                            botonUp = botones[1];
                            botonDown = botones[3];
                            botonUp.onclick = function() {incrementaSpinner('orden_de_{{ platillo.platillo.nombre }}')};
                            botonDown.onclick = function() {decrementaSpinner('orden_de_{{ platillo.platillo.nombre }}')};
                            forma[1].id = "orden_de_{{ platillo.platillo.nombre }}";
                            forma[1].name = "orden_de_{{ platillo.platillo.nombre }}";

                            celdaSpinner.appendChild(nuevo);

                            fila.appendChild(celda1);
                            fila.appendChild(celda2);
                            fila.appendChild(celdaSpinner);
                            fila.id = "fila-{{ platillo.platillo.nombre }}";

                            // agrega la hilera al final de la tabla (al final del elemento tblbody)
                            tbodyOrdenes.appendChild(fila);
                        {% endif %}
                    {% endif %}
                {% endif %}
            {% endfor %}
            
            // posiciona el tbody debajo del elemento table
            tablaOrdenes.appendChild(encabezado);
            tablaOrdenes.appendChild(tbodyOrdenes);
            
            // appends table into body
            body.appendChild(tablaOrdenes);
            tablaOrdenes.align = "center";
            tablaOrdenes.cellPadding="10";
            tablaOrdenesPadre.appendChild(tablaOrdenes);

            //Modifica estilo a la tabla de ordenes
            $(".buscador-ordenes").css("border","black 2px solid");
            $(".thbuscador-ordenes").css("background-color","#FFE082");
           
            //Ordena alfabeticamente la tabla
            sortTable("tabla-ordenes");
        }

        //Genera la tabla que contiene las bebidas
        function generaTablaBebidas(){
            // Crea un elemento table y un elemento tbody
            var tablaBebidas = document.createElement("table");
            tablaBebidas.id = "tabla-bebidas"
            tablaBebidas.className = "buscador-bebidas";
            var tbodyBebidas = document.createElement("tbody");

            // Crea el encabezado de la tabla
            var encabezado = document.createElement("thead");
            encabezado.className = "thbuscador-bebidas";
            var filaEncabezado = document.createElement("tr");
            var e1 = document.createElement("th");
            e1.scope = "col";
            var e2 = document.createElement("th");
            e2.scope = "col";
            var e3 = document.createElement("th");
            e3.scope = "col";
            e1.className = "buscador-bebidas";
            e2.className = "buscador-bebidas";
            e3.className = "buscador-bebidas";
            var textoE1 = document.createTextNode("Bebida");
            var textoE2 = document.createTextNode("Costo");
            var textoE3 = document.createTextNode("Selector");
            
            e1.appendChild(textoE1);
            e2.appendChild(textoE2);
            e3.appendChild(textoE3);
            filaEncabezado.appendChild(e1);
            filaEncabezado.appendChild(e2);
            filaEncabezado.appendChild(e3);
            encabezado.appendChild(filaEncabezado);

            var i=0;
            //Crea cada fila para los platillos
            {% for platillo in historiales_precio %}
                {% if platillo.platillo.tipo == "BE" %}
                    
                    var fila = document.createElement("tr");
                    var celda1 = document.createElement("td");
                    var celda2 = document.createElement("td");
                    var celdaSpinner = document.createElement("td"); 
                    celda1.id = "celda1-{{ platillo.platillo.nombre }}";
                    celda2.id = "celda2-{{ platillo.platillo.nombre }}";
                    celdaSpinner.id = "celda-spinner-{{ platillo.platillo.nombre }}";
                    celda1.className = "buscador-bebidas";
                    celda2.className = "buscador-bebidas";
                    celdaSpinner.className = "buscador-bebidas";
                    var textoCelda1 = document.createTextNode("{{ platillo.platillo.nombre }}");
                    var textoCelda2 = document.createTextNode("$ {{ platillo.precio }}");
                    celda1.appendChild(textoCelda1);
                    celda2.appendChild(textoCelda2);

                    //Esto es para crear el spinner dentro de la celda
                    var original = document.getElementById("spinner");
                    var nuevo = original.cloneNode(true);
                    nuevo.style.visibility = "visible";
                    nuevo.id = "spinner-{{ platillo.platillo.nombre }}";
                    i += 1;
                    hijos = nuevo.childNodes;
                    forma = hijos[1].childNodes;
                    botones = hijos[3].childNodes;
                    botonUp = botones[1];
                    botonDown = botones[3];
                    botonUp.onclick = function() {incrementaSpinner('orden_de_{{ platillo.platillo.nombre }}')};
                    botonDown.onclick = function() {decrementaSpinner('orden_de_{{ platillo.platillo.nombre }}')};
                    forma[1].id = "orden_de_{{ platillo.platillo.nombre }}";
                    forma[1].name = "orden_bebida_de_{{ platillo.platillo.nombre }}";

                    celdaSpinner.appendChild(nuevo);

                    fila.appendChild(celda1);
                    fila.appendChild(celda2);
                    fila.appendChild(celdaSpinner);
                    fila.id = "fila-{{ platillo.platillo.nombre }}";

                    // agrega la hilera al final de la tabla (al final del elemento tblbody)
                    tbodyBebidas.appendChild(fila);

                {% endif %}
            {% endfor %}
            
            // posiciona el tbody debajo del elemento table
            tablaBebidas.appendChild(encabezado);
            tablaBebidas.appendChild(tbodyBebidas);
            
            // appends table into body
            body.appendChild(tablaBebidas);
            tablaBebidas.align = "center";
            tablaBebidas.cellPadding="10";
            tablaBebidasPadre.appendChild(tablaBebidas);

            //Modifica estilo a la tabla de ordenes
            $(".buscador-bebidas").css("border","black 2px solid");
            $(".thbuscador-bebidas").css("background-color","#FFE082");
           
            //Ordena alfabeticamente la tabla
            sortTable("tabla-bebidas");
        }

        //Genera la tabla que contiene los extras
        function generaTablaExtras(){
            // Crea un elemento table y un elemento tbody
            var tablaExtras = document.createElement("table");
            tablaExtras.id = "tabla-extras"
            tablaExtras.className = "buscador-extras";
            var tbodyExtras = document.createElement("tbody");

            // Crea el encabezado de la tabla
            var encabezado = document.createElement("thead");
            encabezado.className = "thbuscador-extras";
            var filaEncabezado = document.createElement("tr");
            var e1 = document.createElement("th");
            e1.scope = "col";
            var e2 = document.createElement("th");
            e2.scope = "col";
            var e3 = document.createElement("th");
            e3.scope = "col";
            e1.className = "buscador-extras";
            e2.className = "buscador-extras";
            e3.className = "buscador-extras";
            var textoE1 = document.createTextNode("Extra");
            var textoE2 = document.createTextNode("Costo");
            var textoE3 = document.createTextNode("Selector");
            
            e1.appendChild(textoE1);
            e2.appendChild(textoE2);
            e3.appendChild(textoE3);
            filaEncabezado.appendChild(e1);
            filaEncabezado.appendChild(e2);
            filaEncabezado.appendChild(e3);
            encabezado.appendChild(filaEncabezado);

            var i=0;
            //Crea cada fila para los platillos
            {% for platillo in historiales_precio %}
                {% if platillo.platillo.tipo == "EX" %}
                    
                    var fila = document.createElement("tr");
                    var celda1 = document.createElement("td");
                    var celda2 = document.createElement("td");
                    var celdaSpinner = document.createElement("td"); 
                    celda1.id = "celda1-{{ platillo.platillo.nombre }}";
                    celda2.id = "celda2-{{ platillo.platillo.nombre }}";
                    celdaSpinner.id = "celda-spinner-{{ platillo.platillo.nombre }}";
                    celda1.className = "buscador-extras";
                    celda2.className = "buscador-extras";
                    celdaSpinner.className = "buscador-extras";
                    var textoCelda1 = document.createTextNode("{{ platillo.platillo.nombre }}");
                    var textoCelda2 = document.createTextNode("$ {{ platillo.precio }}");
                    celda1.appendChild(textoCelda1);
                    celda2.appendChild(textoCelda2);

                    //Esto es para crear el spinner dentro de la celda
                    var original = document.getElementById("spinner");
                    var nuevo = original.cloneNode(true);
                    nuevo.style.visibility = "visible";
                    nuevo.id = "spinner-{{ platillo.platillo.nombre }}";
                    i += 1;
                    hijos = nuevo.childNodes;
                    forma = hijos[1].childNodes;
                    botones = hijos[3].childNodes;
                    botonUp = botones[1];
                    botonDown = botones[3];
                    botonUp.onclick = function() {incrementaSpinner('orden_de_{{ platillo.platillo.nombre }}')};
                    botonDown.onclick = function() {decrementaSpinner('orden_de_{{ platillo.platillo.nombre }}')};
                    forma[1].id = "orden_de_{{ platillo.platillo.nombre }}";
                    forma[1].name = "orden_extra_de_{{ platillo.platillo.nombre }}";

                    celdaSpinner.appendChild(nuevo);

                    fila.appendChild(celda1);
                    fila.appendChild(celda2);
                    fila.appendChild(celdaSpinner);
                    fila.id = "fila-{{ platillo.platillo.nombre }}";

                    // agrega la hilera al final de la tabla (al final del elemento tblbody)
                    tbodyExtras.appendChild(fila);

                {% endif %}
            {% endfor %}
            
            // posiciona el tbody debajo del elemento table
            tablaExtras.appendChild(encabezado);
            tablaExtras.appendChild(tbodyExtras);
            
            // appends table into body
            body.appendChild(tablaExtras);
            tablaExtras.align = "center";
            tablaExtras.cellPadding="10";
            tablaExtrasPadre.appendChild(tablaExtras);

            //Modifica estilo a la tabla de ordenes
            $(".buscador-extras").css("border","black 2px solid");
            $(".thbuscador-extras").css("background-color","#FFE082");
           
            //Ordena alfabeticamente la tabla
            sortTable("tabla-extras");
        }

        //Genera la tabla que contiene los sushis
        function generaTablaSushis(){
            // Crea un elemento table y un elemento tbody
            var tablaSushis = document.createElement("table");
            tablaSushis.id = "tabla-sushis"
            tablaSushis.className = "buscador-sushis";
            var tbodySushis = document.createElement("tbody");

            // Crea el encabezado de la tabla
            var encabezado = document.createElement("thead");
            encabezado.className = "thbuscador-sushis";
            var filaEncabezado = document.createElement("tr");
            var e1 = document.createElement("th");
            e1.scope = "col";
            var e2 = document.createElement("th");
            e2.scope = "col";
            var e3 = document.createElement("th");
            e3.scope = "col";
            e1.className = "buscador-sushis";
            e2.className = "buscador-sushis";
            e3.className = "buscador-sushis";
            var textoE1 = document.createTextNode("Sushi");
            var textoE2 = document.createTextNode("Costo");
            var textoE3 = document.createTextNode("Selector");
            
            e1.appendChild(textoE1);
            e2.appendChild(textoE2);
            e3.appendChild(textoE3);
            filaEncabezado.appendChild(e1);
            filaEncabezado.appendChild(e2);
            filaEncabezado.appendChild(e3);
            encabezado.appendChild(filaEncabezado);

            var i=0;
            //Crea cada fila para los platillos
            {% for platillo in historiales_precio %}
                {% if platillo.platillo.tipo == "SU" %}
                    
                    var fila = document.createElement("tr");
                    var celda1 = document.createElement("td");
                    var celda2 = document.createElement("td");
                    var celdaSpinner = document.createElement("td"); 
                    celda1.id = "celda1-{{ platillo.platillo.nombre }}";
                    celda2.id = "celda2-{{ platillo.platillo.nombre }}";
                    celdaSpinner.id = "celda-spinner-{{ platillo.platillo.nombre }}";
                    celda1.className = "buscador-sushis";
                    celda2.className = "buscador-sushis";
                    celdaSpinner.className = "buscador-sushis";
                    var textoCelda1 = document.createTextNode("{{ platillo.platillo.nombre }}");
                    var textoCelda2 = document.createTextNode("$ {{ platillo.precio }}");
                    celda1.appendChild(textoCelda1);
                    celda2.appendChild(textoCelda2);

                    //Esto es para crear el spinner dentro de la celda
                    var original = document.getElementById("spinner");
                    var nuevo = original.cloneNode(true);
                    nuevo.style.visibility = "visible";
                    nuevo.id = "spinner-{{ platillo.platillo.nombre }}";
                    i += 1;
                    hijos = nuevo.childNodes;
                    forma = hijos[1].childNodes;
                    botones = hijos[3].childNodes;
                    botonUp = botones[1];
                    botonDown = botones[3];
                    botonUp.onclick = function() {incrementaSpinner('orden_de_{{ platillo.platillo.nombre }}')};
                    botonDown.onclick = function() {decrementaSpinner('orden_de_{{ platillo.platillo.nombre }}')};
                    forma[1].id = "orden_de_{{ platillo.platillo.nombre }}";
                    forma[1].name = "orden_sushi_de_{{ platillo.platillo.nombre }}";

                    celdaSpinner.appendChild(nuevo);

                    fila.appendChild(celda1);
                    fila.appendChild(celda2);
                    fila.appendChild(celdaSpinner);
                    fila.id = "fila-{{ platillo.platillo.nombre }}";

                    // agrega la hilera al final de la tabla (al final del elemento tblbody)
                    tbodySushis.appendChild(fila);

                {% endif %}
            {% endfor %}
            
            // posiciona el tbody debajo del elemento table
            tablaSushis.appendChild(encabezado);
            tablaSushis.appendChild(tbodySushis);
            
            // appends table into body
            body.appendChild(tablaSushis);
            tablaSushis.align = "center";
            tablaSushis.cellPadding="10";
            tablaSushisPadre.appendChild(tablaSushis);

            //Modifica estilo a la tabla de ordenes
            $(".buscador-sushis").css("border","black 2px solid");
            $(".thbuscador-sushis").css("background-color","#FFE082");
           
            //Ordena alfabeticamente la tabla
            sortTable("tabla-sushis");
        }


        function incrementaSpinner(platilloNombre){
            var val = document.getElementById(platilloNombre).value;//obtenemos el valor del elemento
            val = parseInt(val) + 1;//lo parseamos a int e incrementamos en 1

            if(!isNaN(val)){//validación Is Not a Number
                if(val<100)
                    document.getElementById(platilloNombre).value = val;//actualizamos el valor
            }
        }

        function decrementaSpinner(platilloNombre){
            var val = document.getElementById(platilloNombre).value;
            val = parseInt(val) - 1;
            if(!isNaN(val)){
                if(val>=0)
                    document.getElementById(platilloNombre).value = val;
            }
        }


        var numeroMenus = 0;

        function agregarMenu(){
            //creamos un elemeno de tipo ítem de lista (<li>),
            //le asignamos las clases list-group-item y menu-completo,
            //y le damos un identificador del siguente lugar en la lista
            var nuevoMenu = document.createElement("li");
            nuevoMenu.className = "list-group-item menu-completo";
            nuevoMenu.id = "menu-" + numeroMenus;
            numeroMenus++;

            //buscamos en el documento el elemento con id "plantilla-menu", extraemos su código HTML,
            //y se lo insertamos al menú que acabamos de crear,
            //para luego buscar el elemento "lista-menus" y agregrle el menú que acabamos de crear.
            //luego buscamos dentro del elemento buscamos el texto y le ponemos su número de menú
            //por último incrementamos el contador de cuantos menús hay en la vista
            nuevoMenu.innerHTML = document.getElementById("plantilla-menu").innerHTML;
            var selecciones = nuevoMenu.getElementsByClassName("form-select");
            for(i = 0; i<selecciones.length; i++){
                selecciones[i].name = "menu-" + numeroMenus + "-" + i;
            }
            
            //Las siguientes lineas son para el input de observaciones individuales del menu completo
            var divObservaciones = nuevoMenu.getElementsByClassName("form-outline");
            var observacionesMenu = nuevoMenu.getElementsByClassName("form-control");
            observacionesMenu[0].id = "observaciones-individuales-" + numeroMenus;
            //Se crea la etiqueta form-label que va dentro del input
            var etiquetaObservaciones = document.createElement("label");
            etiquetaObservaciones.className = "form-label";
            etiquetaObservaciones.innerHTML = "Observaciones individuales de este menu completo";
            etiquetaObservaciones.htmlFor = observacionesMenu[0].id;
            divObservaciones[0].appendChild(etiquetaObservaciones);
            observacionesMenu[0].name = "observaciones-individuales-" + numeroMenus;
            

            document.getElementById("lista-menus").appendChild(nuevoMenu);


        }



        function removerMenu(boton){
            //ya que el botón se pasa a si mismo como parámetro, lo usamos de referencia para obtener su contenedor,
            //en este caso su "abuelo" (padre del padre).
            //ya que tenemos ese elemento, lo borramos,
            //y decrementamos el contador de menús en la vista
            menu = boton.parentElement.parentElement.parentElement.parentElement.parentElement
            menu.remove()
            numeroMenus--;

            //ahora obtenemos todos los menús en el documento,
            //y a cada uno le reasignamos su ID y texto para mantener la secuencia de estos
            menus = document.getElementsByClassName("list-group-item menu-completo")
            for (var i=0; i<menus.length; i++){
                menus[i].id = "menu-" + i
            }
        }

        var indice = 1;
        function agregarDesayuno(bot_env,b,c){
            //Primero vamos a obtener las ordenes

            paquete = bot_env.value;
           //Obtenemos el valor del primer select
            /*var combo = document.getElementById("select"+a);
            var select = combo.options[combo.selectedIndex].text;
            document.ready = document.getElementById("select"+a).value = '0';*/
            //Obtenemos el valor del segundo select
            var combo2 = document.getElementById("select"+b);
            var select2 = combo2.options[combo2.selectedIndex].text;
            document.ready = document.getElementById("select"+b).value = '0';
           //Obtenemos el valor del tercer select
            if(c == null){

                var limpia = ""
                var fila='<tr id="fila'+indice+'"><input hidden name="orden-desayunos_'+indice+'" value="'+paquete+'"></input><td>'+paquete+'</td><input hidden name="orden-desayunos_'+indice+'_1" value="Jugo y Fruta"></input><td>Jugo y Fruta</td><input hidden name="orden-desayunos_'+indice+'_2" value="'+select2+'"></input><td>'+select2 +'</td><td>'+limpia+'</td><td><button  type="button" class="btn btn-primary btn-floating mx-1" id="btn_'+indice+'" onclick="eliminarFila(this,'+indice+')"> <i class="far fa-trash-alt"></i> </button></td></tr>';
            }
            else{
                var combo3 = document.getElementById("select"+c);
                var select3 = combo3.options[combo3.selectedIndex].text;
                document.ready = document.getElementById("select"+c).value = '0';
                var fila='<tr id="fila'+indice+'"><input hidden name="orden-desayunos_'+indice+'" value="'+paquete+'"></input><td>'+paquete+'</td><input hidden name="orden-desayunos_'+indice+'_1" value="Jugo y Fruta"></input><td>Jugo y Fruta</td><input hidden name="orden-desayunos_'+indice+'_2" value="'+select2+'"></input><td>'+select2 +'</td><input hidden name="orden-desayunos_'+indice+'_3" value="'+select3+'"></input><td>'+select3+'</td><td><button  type="button" class="btn btn-primary btn-floating mx-1" id="btn_'+indice+'" onclick="eliminarFila(this,'+indice+')"> <i class="far fa-trash-alt"></i> </button></td></tr>';

            }


            if ((select2 !== "------" && select3 !== "------")){
                var orden = document.createElement("TR");
                orden.innerHTML=fila;
                document.getElementById("ordenes-desayunos").appendChild(orden);
                indice++;
            }
        }
        function eliminarFila(eliminar,index) {
            var btn = eliminar.value;
            var borrar = eliminar.parentElement.parentElement;
            borrar.remove();

        }

        function sumarextra(){
            for (i=1; i<7; i++){
                var operacion = document.getElementById("costo"+i).textContent;
                var contenido = parseInt(operacion.replace("Precio --------", ""));
                contenido = contenido + 10;
                console.log(contenido);

                //console.log(elem2);
                var nuevo = document.getElementById("extra"+i).innerHTML = "Precio ------- "+contenido;
            }


        }
        

        /**
         *Método para validar que se llenan todos los campos de los menus completos 
         *en caso de haber en la orden. 
         */
        function validaForm(){
            flag = false;
            //obtener todos los select
            selects = document.getElementsByTagName("select");
            //iteramos sobre totdos los selects
            for(i=0; i < selects.length; i++){
                if(selects[i].name.includes("menu")){
                    if(selects[i].value == "")//si pertenece a los menus y tiene value ""
                        flag = true;//actualizamos la bandera
                }
            }
            if(flag)
                window.alert("¡Por favor seleccione todas las entradas para los menús completos!");
            else
                document.getElementById("formMenu").submit();
        }
        function sortTable(tableID) {
            var table, rows, switching, i, x, y, shouldSwitch;
            table = document.getElementById(tableID);
            switching = true;
            /*Make a loop that will continue until
            no switching has been done:*/
            while (switching) {
                //start by saying: no switching is done:
                switching = false;
                rows = table.rows;
                /*Loop through all table rows (except the
                first, which contains table headers):*/
                for (i = 1; i < (rows.length - 1); i++) {
                //start by saying there should be no switching:
                shouldSwitch = false;
                /*Get the two elements you want to compare,
                one from current row and one from the next:*/
                x = rows[i].getElementsByTagName("TD")[0];
                y = rows[i + 1].getElementsByTagName("TD")[0];
                //check if the two rows should switch place:
                if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
                    //if so, mark as a switch and break the loop:
                    shouldSwitch = true;
                    break;
                }
                }
                if (shouldSwitch) {
                /*If a switch has been marked, make the switch
                and mark that a switch has been done:*/
                rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                switching = true;
                }
            }
        }

    </script>
{% endblock script %}
